# TODO list

Here are all the things this game is missing to be complete, in priority order from top (highest priority) to bottom (lowest). Feel free to remove them once one of them is done:

- implement the game events system following the architecture specification in `docs/game-events-spec.md`. Follow the implementation checklist in the spec (steps 1-12). This includes: GameEvent base class, GameEventFactory (auto-discovery), GameEventManager, wiring mode:event to Socket.IO and client, adding setMusicRate to the audio manager, and implementing SpeedShift as the first concrete event. Write tests for all new server code. Update docs (architecture.md, type-system.md, extending-the-game.ts) to cover the new system
- classic mode should have a "random" event where threshold is altered and music changes speed (it goes up to 2x speed). During that time period, threshold is higher so players can move faster. Then there is a chance that the game goes back to the normal state. The chance should be calculated like this: every 5 seconds, there is a 1 in 4 chance that we go from slow to fast. If we are in fast mode, every 5 seconds there is a 1 in 3 chance to go back to slow. Though, both of them should have a way to increase the chance of the shift to happen. I think it's better to think of it like this: there is 3/4 chance that we stay in the slow mode. Then after another 5 seconds there will be (3/4)^2 chance to stay in slow, then after another 5 seconds it will be (3/4)^3 to stay in slow. The same will be made with fast mode but there it will be 2/3, then (2/3)^2 and so on. This makes sure it will be really difficult for a mode to last a lot
- add a qr code on the lobby screen that redirects to the basepath/join. This will be used by players to connect
- add a settings screen (accessible from the UI) where all the more complex settings (like sensibility of movement detection) can be accessed. In the future, other settings will be accessed through this screen
- think of the best way for this application to store relevant data. Here, I'm talking about settings, which should be able to persist even when server is restarted. Of course there should be a way to flush settings in order to be able to run tests without having weird settings on. Remember to write tests to check persistence of settings works
- game should remember last used settings after game is over and keep them like this (maybe fixed by previous point)
